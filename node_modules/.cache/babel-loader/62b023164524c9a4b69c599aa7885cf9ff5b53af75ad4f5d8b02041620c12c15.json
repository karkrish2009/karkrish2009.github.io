{"ast":null,"code":"import{useEffect}from\"react\";import TableHead from\"./TableHead\";import GameRow from\"./GameRow\";import{useLocation}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function GameList(_ref){var gamesData=_ref.gamesData,handleGamesData=_ref.handleGamesData;//{ preferences }\nvar apiKey='b3133a4f682a42a2925438e5efd0f900';console.log(apiKey);var _useLocation=useLocation(),state=_useLocation.state;var formData=(state===null||state===void 0?void 0:state.formData)||{};// console.log(\"This is the game Data: \", formData);\nfunction formatDate(dateString){var date=new Date(dateString);date.setUTCHours(0,0,0,0);// Set the time to midnight UTC\nvar year=date.getUTCFullYear();var month=String(date.getUTCMonth()+1).padStart(2,'0');var day=String(date.getUTCDate()).padStart(2,'0');return\"\".concat(year,\"-\").concat(month,\"-\").concat(day);}function buildQueryString(formData){var queryParams=\"\";if(!formData){return apiKey;}if(formData.startDate&&formData.endDate){var startDateFormatted=formatDate(formData.startDate);var endDateFormatted=formatDate(formData.endDate);queryParams+=\"&dates=\".concat(startDateFormatted,\",\").concat(endDateFormatted);}if(formData.minMetaCritic>=0&&formData.maxMetaCritic){queryParams+=\"&metacritic=\".concat(formData.minMetaCritic,\",\").concat(formData.maxMetaCritic);}queryParams+=\"&page_size=100\";return queryParams;}var queryParamString=buildQueryString(formData);var apiUrl=\"https://api.rawg.io/api/games?key=\".concat(apiKey).concat(queryParamString);console.log(\"apiUrl is: \",apiUrl);useEffect(function(){fetch(apiUrl).then(function(res){if(res.ok){return res.json();}else if(res.status>=500){return res.json().then(function(error){return Promise.reject(new Error(error.message));});}else{// All other errors\nreturn Promise.reject(new Error(\"Unexpected status code \".concat(res.status)));}}).then(function(data){handleGamesData(data.results);}).catch(function(error){console.error(error);// Log for debugging\n});},[apiUrl,handleGamesData]);//  console.log(games);\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"List/table of game data\"}),gamesData.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No games found under the specified criteria.\"}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(TableHead,{headers:['Name','Platforms','Genres','Release Date','MetaCritic Rating','ESRB Rating','Image']}),/*#__PURE__*/_jsx(\"tbody\",{children:gamesData.map(function(game){return/*#__PURE__*/_jsx(GameRow,{game:game},game.id);})})]})]})});}","map":{"version":3,"names":["useEffect","TableHead","GameRow","useLocation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GameList","_ref","gamesData","handleGamesData","apiKey","console","log","_useLocation","state","formData","formatDate","dateString","date","Date","setUTCHours","year","getUTCFullYear","month","String","getUTCMonth","padStart","day","getUTCDate","concat","buildQueryString","queryParams","startDate","endDate","startDateFormatted","endDateFormatted","minMetaCritic","maxMetaCritic","queryParamString","apiUrl","fetch","then","res","ok","json","status","error","Promise","reject","Error","message","data","results","catch","children","length","headers","map","game","id"],"sources":["C:/Users/karkr/Documents/classes/dev10/testing-tandem/karkrish2009.github.io/src/components/GameList.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport TableHead from \"./TableHead\";\r\nimport GameRow from \"./GameRow\";\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport default function GameList({gamesData, handleGamesData}) {//{ preferences }\r\n    const apiKey = 'b3133a4f682a42a2925438e5efd0f900';\r\n    console.log(apiKey);\r\n    const { state } = useLocation();\r\n    const formData = state?.formData || {};\r\n    // console.log(\"This is the game Data: \", formData);\r\n\r\n    function formatDate(dateString) {\r\n        const date = new Date(dateString);\r\n        date.setUTCHours(0, 0, 0, 0); // Set the time to midnight UTC\r\n        const year = date.getUTCFullYear();\r\n        const month = String(date.getUTCMonth() + 1).padStart(2, '0');\r\n        const day = String(date.getUTCDate()).padStart(2, '0');\r\n        return `${year}-${month}-${day}`;\r\n    }\r\n\r\n    function buildQueryString(formData) {\r\n        let queryParams = \"\";\r\n\r\n        if (!formData) {\r\n            return apiKey;\r\n        }\r\n\r\n        if (formData.startDate && formData.endDate) {\r\n            const startDateFormatted = formatDate(formData.startDate);\r\n            const endDateFormatted = formatDate(formData.endDate);\r\n            queryParams += `&dates=${startDateFormatted},${endDateFormatted}`;\r\n        }\r\n\r\n        if (formData.minMetaCritic>=0 && formData.maxMetaCritic) {\r\n            queryParams += `&metacritic=${formData.minMetaCritic},${formData.maxMetaCritic}`;\r\n        }\r\n\r\n        queryParams+=\"&page_size=100\";\r\n        return queryParams;\r\n    }\r\n\r\n    const queryParamString = buildQueryString(formData);\r\n    const apiUrl = `https://api.rawg.io/api/games?key=${apiKey}${queryParamString}`\r\n    console.log(\"apiUrl is: \", apiUrl);\r\n\r\n    useEffect(() => {\r\n        fetch(apiUrl)\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                } else if (res.status >= 500) {\r\n                    return res\r\n                        .json()\r\n                        .then(error =>\r\n                            Promise.reject(new Error(error.message))\r\n                        );\r\n                } else {\r\n                    // All other errors\r\n                    return Promise.reject(\r\n                        new Error(`Unexpected status code ${res.status}`)\r\n                    );\r\n                }\r\n            })\r\n            .then(data => {\r\n                handleGamesData(data.results);\r\n            })\r\n            .catch(error => {\r\n                console.error(error); // Log for debugging\r\n            });\r\n    }, [apiUrl, handleGamesData]);\r\n    //  console.log(games);\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <h1>List/table of game data</h1>\r\n                {gamesData.length === 0 ? (\r\n                    <p>No games found under the specified criteria.</p>\r\n                ) : (\r\n                    <table>\r\n                        <TableHead\r\n                            headers={['Name', 'Platforms', 'Genres', 'Release Date', 'MetaCritic Rating', 'ESRB Rating', 'Image']}\r\n                        />\r\n                        <tbody>\r\n                            {gamesData.map((game) => (\r\n                                <GameRow\r\n                                    key={game.id}\r\n                                    game={game}\r\n                                />\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}